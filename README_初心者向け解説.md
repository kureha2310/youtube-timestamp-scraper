# 🎵 YouTube歌配信タイムスタンプ管理システム - 初心者向け解説

## これは何をするシステム？

**簡単に言うと:** VTuberやYouTuberの歌配信動画のコメント欄にあるタイムスタンプ（「6:53 曲名/歌手」みたいなやつ）を自動で集めて、Googleスプレッドシートで見やすく整理するシステムです！

### 🎯 こんな人におすすめ
- 推しの歌枠で「あの曲いつ歌ってたっけ？」と探すのが大変
- 何回同じ曲歌ってるか知りたい
- ジャンル別にまとめて見たい
- 過去の歌枠を遡るのが面倒

---

## 📖 超シンプル説明（3行で理解）

```
1️⃣ Pythonプログラムが → YouTubeから歌配信を見つけて、タイムスタンプを集める
2️⃣ 集めたデータをCSVファイルにする → Googleスプレッドシートにコピペ
3️⃣ Google Apps Scriptが → ジャンル別に整理して、クリックできるリンク付きリストを作る
```

---

## 🔄 システムの流れ（絵で見る）

### ステップ1: データを集める（Pythonスクレイパー）

```
YouTube
 ↓
[📹 動画1: 【歌枠】今日も歌うよ！]
[📹 動画2: ゲーム配信]              ← これはスキップ
[📹 動画3: 🎤歌いたい日]
 ↓
スクレイパー: "歌枠っぽい動画だけ取得するね！"
 ↓
[💬 コメント欄を読む]
 "6:53 サイハテ/小林オニキス"
 "14:19 アイデンティティ/Kanaria"
 "20:04 アイラ/n-buna"
 ↓
[📊 song_timestamps_complete.csv]
 曲名          | アーティスト | タイムスタンプ | 配信日
 サイハテ      | 小林オニキス | 6:53           | 2025/02/04
 アイデンティティ| Kanaria     | 14:19          | 2025/02/04
```

### ステップ2: 見やすく整理する（Google Apps Script）

```
Googleスプレッドシート
 ↓
[📋 リスト(一覧)] ← CSVをコピペ
 ↓
GASスクリプト実行ボタンをポチ
 ↓
自動で3つのシートが生成される！
 ↓
┌─────────────────────────────────┐
│ 🦉リスト(Vocaloid)              │
├───┬─────────┬──────┬──────────┤
│回数│曲名      │配信日1│TS1(リンク)│
├───┼─────────┼──────┼──────────┤
│ 3 │メルト    │02/04  │ 🔗1:14:49 │ ← クリックすると動画が開く！
│ 2 │シャルル  │02/10  │ 🔗2:15:30 │
└───┴─────────┴──────┴──────────┘

┌─────────────────────────────────┐
│ 🦉リスト(アニメ)                │
├───┬─────────┬──────┬──────────┤
│ 2 │シルエット│02/09  │ 🔗1:59:59 │
└───┴─────────┴──────┴──────────┘

┌─────────────────────────────────┐
│ 🦉リスト(その他)                │
├───┬─────────┬──────┬──────────┤
│ 4 │マリーゴ..│02/04  │ 🔗0:04:48 │
└───┴─────────┴──────┴──────────┘
```

---

## 🎨 便利なポイント

### 1. **賢い歌配信検出**
タイトルに「歌枠」って書いてなくても、コメント欄を見て「あ、これ歌配信だ！」って分かる

```
❌ タイトル: "雑談します"
✅ でもコメント欄に:
   "6:53 曲A"
   "14:19 曲B"
   "20:04 曲C"
   → "あ、これ歌ってるじゃん！"
```

### 2. **自動お掃除機能**
コメント欄によくある余計な文字を自動で消す

```
Before: "01. ＆ サイハテ / 小林オニキス feat. 初音ミク"
After:  "サイハテ" | "小林オニキス feat. 初音ミク"
        ↑曲名         ↑アーティスト
```

### 3. **重複を賢く統合**
同じ曲を複数の人がタイムスタンプ書いてても、1つにまとめる

```
コメント1: "6:53 サイハテ"
コメント2: "6:55 サイハテ"    ← 2秒しか差がない
コメント3: "6:53 サイハテ/小林オニキス"  ← 詳細情報あり

→ 結果: "6:53 サイハテ/小林オニキス" だけ残す（一番詳しいやつ）
```

### 4. **歌った回数がすぐわかる**
```
| 回数 | 曲名              | 配信日1  | 配信日2  | 配信日3  |
|------|-------------------|----------|----------|----------|
|  5   | ダダダダ天使      | 02/04    | 03/15    | 04/20    |
|  3   | メルト            | 02/10    | 03/01    | 05/12    |
|  1   | 新曲              | 06/01    |          |          |

↑ 推しがこの曲好きなんだなってすぐ分かる！
```

---

## 💡 実際の使い方

### 準備するもの
1. **Python** - データ収集用のプログラム
2. **YouTube Data API キー** - YouTubeからデータを取得する許可証
3. **Googleスプレッドシート** - データを見やすく表示

### 実行手順

#### 📥 ステップ1: データを集める
```bash
# コマンドプロンプトで実行
python src/extractors/youtube_song_scraper.py
```

**実行中の様子:**
```
YouTube歌動画タイムスタンプ抽出ツール（統合版）
============================================================
全動画数: 115, 歌枠動画数: 74

コメントを取得中...
1/74: 【#歌枠】今日も歌うよ～
2/74: 【歌配信】リクエストにこたえる
3/74: [title with emoji]
...

タイムスタンプを抽出中...
抽出されたタイムスタンプ数: 369

CSV形式に変換中...

完了！CSVを出力しました: song_timestamps_complete.csv
統計:
   - 処理した動画数: 74
   - 抽出したタイムスタンプ数: 369
   - 最終出力行数: 210
```

#### 📋 ステップ2: スプレッドシートにコピペ
1. `song_timestamps_complete.csv` を開く
2. 全部選択してコピー（Ctrl+A → Ctrl+C）
3. Googleスプレッドシートの「リスト(一覧)」シートに貼り付け

#### 🎨 ステップ3: ジャンル別シートを作る
1. Googleスプレッドシートを開く
2. メニューから「拡張機能」→「Apps Script」
3. スクリプトエディタに関数をコピペ
4. 実行ボタン（▶️）をクリック
5. 完成！3つのシートが自動で生成される

---

## 🎯 こんな時に便利！

### シチュエーション1: 「あの曲いつ歌ってた？」
```
🦉リスト(Vocaloid) でCtrl+Fで検索
「メルト」→ 見つかった！
02/04、03/17、05/10の3回歌ってる
🔗リンクをクリック → 動画が該当箇所から再生開始！
```

### シチュエーション2: 「何回この曲歌ってる？」
```
「回数」列でソート
→ 1位: ダダダダ天使（5回）
→ 2位: メルト（3回）
→ 3位: シャルル（3回）
```

### シチュエーション3: 「アニソンだけ聞きたい」
```
🦉リスト(アニメ) を開く
→ アニソンだけがまとまってる！
シルエット、ハレ晴れユカイ、God knows...
```

---

## 🤔 よくある質問

**Q: プログラミング分からなくても使える？**
A: 最初のセットアップだけ少し頑張れば、あとはボタン1つで動きます！

**Q: お金かかる？**
A: 基本無料！YouTube APIは1日10,000回まで無料で使えます（個人使用なら十分）

**Q: 他の人のチャンネルも使える？**
A: はい！`user_ids.json` に好きなチャンネルIDを入れればOK

**Q: 何人分のデータまで扱える？**
A: Googleスプレッドシートの上限（1シート500万セル）まで大丈夫

**Q: データが壊れたらどうする？**
A: バックアップJSON（`comment_info.json`）が自動保存されるので復元できます

---

## 🎁 おまけ機能

### ジャンル自動判定
```python
"初音ミク" が含まれる → Vocaloid
"涼宮ハルヒ" が含まれる → アニメ
それ以外 → その他
```

### 確度スコア
```
0.9 = ほぼ確実に歌配信
0.7 = たぶん歌配信
0.5 = 微妙...（ゲーム配信で曲流してただけかも）
0.3 = 怪しい
```

### ひらがな検索
```
「まりーごーるど」でも「マリーゴールド」を見つけられる！
```

---

## 🚀 もっと便利にする方法

### カスタマイズ例1: 自分の好きなジャンルを追加
```javascript
// GASのコードを変更
const genres = ['Vocaloid', 'アニメ', 'その他', 'J-POP'];  // ← 追加
```

### カスタマイズ例2: 除外したいキーワードを追加
```python
# ゲーム配信を除外
exclude_keywords = ["APEX", "スプラ", "マイクラ", "ポケモン"]
```

---

## 📚 もっと詳しく知りたい人向け

技術的な詳細は `README_システム解説.md` を見てね！

- データフロー図
- 関数の詳細説明
- アルゴリズムの仕組み
- トラブルシューティング

---

## 🎉 完成イメージ

最終的にこんな感じになります：

```
┌─────────────────────────────────────────────────────┐
│ 🦉リスト(Vocaloid)                                  │
├────┬──────────────┬──────────┬─────────┬──────────┤
│回数│曲名           │アーティスト│配信日1  │TS1       │
├────┼──────────────┼──────────┼─────────┼──────────┤
│ 5  │ダダダダ天使  │ナナヲアカリ│2025/02/04│🔗0:15:30 │
│ 3  │メルト        │ryo       │2025/02/04│🔗1:14:49 │
│ 3  │シャルル      │バルーン   │2025/02/09│🔗2:27:07 │
│ 2  │ローリンガール│wowaka    │2025/02/04│🔗1:06:56 │
└────┴──────────────┴──────────┴─────────┴──────────┘

↑ これがボタン1つでできる！
```

---

**作った人に感謝を伝えたいなら...**
- GitHubでスター⭐
- Twitterで報告（改善案も歓迎！）
- バグ見つけたら教えて！

**Happy Singing! 🎤✨**
